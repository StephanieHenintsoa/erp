<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Génération des Fiches de Paie</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   
</head>
<body>
    <div class="main-container">
        <!-- Sidebar -->
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>

        <!-- Content -->
        <div class="content-wrapper">
            <h1><i class="fas fa-file-invoice-dollar"></i> Génération des Fiches de Paie</h1>

            <!-- Error Alert -->
            <div th:if="${error != null}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-triangle"></i>
                <span th:text="${error}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <!-- Success Alert -->
            <div th:if="${success != null}" class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fas fa-check-circle"></i>
                <span th:text="${success}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <!-- Form for Payslip Generation -->
            <div class="form-container">
                <form method="post" th:action="@{/payslips/generate}" class="row g-3">
                    <!-- Employee Selection -->
                    <div class="col-md-6">
                        <label for="employee" class="form-label">Employé</label>
                        <select class="form-select" id="employee" name="employee" required>
                            <option value="" disabled selected>-- Sélectionner un employé --</option>
                            <option th:each="emp : ${employees}" 
                                    th:value="${emp.name}" 
                                    th:text="${emp.employeeName}"></option>
                        </select>
                    </div>

                    <!-- Base Salary -->
                    <div class="col-md-6">
                        <label for="baseSalary" class="form-label">Salaire de base (€)</label>
                        <input type="number" class="form-control" id="baseSalary" name="baseSalary" 
                               placeholder="Ex. 2000000" min="0" step="1">
                    </div>

                    <!-- Start Month -->
                    <div class="col-md-3">
                        <label for="startMonth" class="form-label">Mois de début</label>
                        <select class="form-select" id="startMonth" name="startMonth" required>
                            <option value="" disabled selected>-- Sélectionner un mois --</option>
                            <option value="01">Janvier</option>
                            <option value="02">Février</option>
                            <option value="03">Mars</option>
                            <option value="04">Avril</option>
                            <option value="05">Mai</option>
                            <option value="06">Juin</option>
                            <option value="07">Juillet</option>
                            <option value="08">Août</option>
                            <option value="09">Septembre</option>
                            <option value="10">Octobre</option>
                            <option value="11">Novembre</option>
                            <option value="12">Décembre</option>
                        </select>
                    </div>

                    <!-- Start Year -->
                    <div class="col-md-3">
                        <label for="startYear" class="form-label">Année de début</label>
                        <select class="form-select" id="startYear" name="startYear" required>
                            <option value="" disabled selected>-- Sélectionner une année --</option>
                            <option th:each="y : ${#numbers.sequence(2020, 2025)}" 
                                    th:value="${y}" 
                                    th:text="${y}"></option>
                        </select>
                    </div>

                    <!-- End Month -->
                    <div class="col-md-3">
                        <label for="endMonth" class="form-label">Mois de fin</label>
                        <select class="form-select" id="endMonth" name="endMonth" required>
                            <option value="" disabled selected>-- Sélectionner un mois --</option>
                            <option value="01">Janvier</option>
                            <option value="02">Février</option>
                            <option value="03">Mars</option>
                            <option value="04">Avril</option>
                            <option value="05">Mai</option>
                            <option value="06">Juin</option>
                            <option value="07">Juillet</option>
                            <option value="08">Août</option>
                            <option value="09">Septembre</option>
                            <option value="10">Octobre</option>
                            <option value="11">Novembre</option>
                            <option value="12">Décembre</option>
                        </select>
                    </div>

                    <!-- End Year -->
                    <div class="col-md-3">
                        <label for="endYear" class="form-label">Année de fin</label>
                        <select class="form-select" id="endYear" name="endYear" required>
                            <option value="" disabled selected>-- Sélectionner une année --</option>
                            <option th:each="y : ${#numbers.sequence(2020, 2025)}" 
                                    th:value="${y}" 
                                    th:text="${y}"></option>
                        </select>
                    </div>

                    <!-- Submit Button -->
                    <div class="col-12 mt-4">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-file-invoice"></i> Générer les fiches de paie
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>